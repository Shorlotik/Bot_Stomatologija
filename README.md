# Telegram Bot –¥–ª—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞ –∏ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∞

–ë–æ—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏—ë–º –∫ –ü—Ä–æ–∫–æ–ø—á–∏–∫ –õ—é–¥–º–∏–ª–µ –ù–∏–∫–æ–ª–∞–µ–≤–Ω–µ (—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥, –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥).

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
- üìÖ –ó–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏—ë–º (—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è –∏ –Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∏—è)
- üî¨ –ó–∞–ø–∏—Å—å –Ω–∞ –ë–†–¢ (—Ç–æ–ª—å–∫–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∏ 11:00-15:00)
- üì¶ –ó–∞–∫–∞–∑ –ë–ê–î–æ–≤ NSP
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø–∏—Å–µ–π
- ‚ùå –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–µ–π

### –î–ª—è –≤—Ä–∞—á–∞ (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å):
- üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ –ë–ê–î–æ–≤
- ‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤—Ä—É—á–Ω—É—é –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ Telegram
- üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã
- üèñÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–∏–æ–¥–æ–≤ –æ—Ç–ø—É—Å–∫–∞ –∏ –±–æ–ª—å–Ω–∏—á–Ω–æ–≥–æ
- üìù –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–º–∏ –¥–Ω—è–º–∏
- üîî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Å Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository_url>
cd Bot_Stomatologija
```

2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. SETUP.md)
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ Docker:
```bash
docker-compose up -d --build
```

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
docker-compose logs -f bot
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [DOCKER.md](DOCKER.md)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository_url>
cd Bot_Stomatologija
```

2. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
```bash
python3 -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏
.venv\Scripts\activate  # Windows
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Å–º. SETUP.md)
```

5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
```bash
python -c "from database.migrations import init_db; init_db()"
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
python main.py
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:** [SETUP.md](SETUP.md)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

**üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:** [SETUP.md](SETUP.md)

–ö—Ä–∞—Ç–∫–∏–π —Å–ø–∏—Å–æ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

- `BOT_TOKEN` - —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç—å —É @BotFather)
- `GOOGLE_CALENDAR_EMAIL` - email –∫–∞–ª–µ–Ω–¥–∞—Ä—è Google Calendar
- `GOOGLE_CLIENT_ID` - Client ID –¥–ª—è Google API
- `GOOGLE_CLIENT_SECRET` - Client Secret –¥–ª—è Google API
- `GOOGLE_REFRESH_TOKEN` - Refresh Token –¥–ª—è Google API (–ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ `get_token.py`)
- `GOOGLE_CALENDAR_ID` - ID –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–æ–±—ã—á–Ω–æ —Ä–∞–≤–µ–Ω email)
- `DATABASE_URL` - URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è SQLite: `sqlite:///database.db`)
- `ADMIN_TELEGRAM_ID` - Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `ADMIN_PASSWORD` - –ü–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω ADMIN_TELEGRAM_ID)
- `TIMEZONE` - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Europe/Minsk`)
- `LOG_LEVEL` - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`INFO`, `DEBUG`, `WARNING`, `ERROR`)

### –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ Refresh Token

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `GOOGLE_CLIENT_ID` –∏ `GOOGLE_CLIENT_SECRET` –≤ `.env`:

```bash
python get_token.py
```

–°–∫—Ä–∏–ø—Ç –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≤—ã–¥–∞—Å—Ç Refresh Token.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Bot_Stomatologija/
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database/              # –ú–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ db.py
‚îÇ   ‚îî‚îÄ‚îÄ migrations.py
‚îú‚îÄ‚îÄ handlers/              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ start.py
‚îÇ   ‚îú‚îÄ‚îÄ common.py
‚îÇ   ‚îú‚îÄ‚îÄ dentistry.py
‚îÇ   ‚îú‚îÄ‚îÄ nutrition.py
‚îÇ   ‚îú‚îÄ‚îÄ booking.py
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ keyboards/             # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ booking.py
‚îÇ   ‚îî‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ services/              # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ calendar.py
‚îÇ   ‚îú‚îÄ‚îÄ notifications.py
‚îÇ   ‚îú‚îÄ‚îÄ appointment_service.py
‚îÇ   ‚îî‚îÄ‚îÄ admin_service.py
‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ logger.py
‚îÇ   ‚îú‚îÄ‚îÄ formatters.py
‚îÇ   ‚îú‚îÄ‚îÄ validators.py
‚îÇ   ‚îú‚îÄ‚îÄ date_helpers.py
‚îÇ   ‚îî‚îÄ‚îÄ schedule.py
‚îú‚îÄ‚îÄ logs/                  # –õ–æ–≥–∏ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example          # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è –∏–ª–∏ –ù—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥–∏—è)
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –∑–∞–ø–∏—Å–∏

### –î–ª—è –≤—Ä–∞—á–∞:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/admin` –±–æ—Ç—É
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ADMIN_TELEGRAM_ID)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Google Calendar
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º –æ –∑–∞–ø–∏—Å—è—Ö –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- ‚úÖ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∑–∞ –¥–µ–Ω—å –¥–æ –ø—Ä–∏—ë–º–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–µ–π –ø—Ä–∏ –æ—Ç–ø—É—Å–∫–µ/–±–æ–ª—å–Ω–∏—á–Ω–æ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –±–µ–∑ Telegram (–∑–∞–ø–∏—Å–∏ –≤—Ä–∞—á–æ–º)

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

